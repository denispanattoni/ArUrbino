<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<link href="stile.css" rel="stylesheet" type="text/css">
<!--<script src="java.js"></script>-->
<script src="aframe.min.js"></script>
<script src="aframe-ar.min.js"></script>
<script src="aframe-event-set-component.min.js"></script>
<script src="FileSaver.js"></script>
<script src="html2canvas.js"></script>
<title>A.r</title>
</head>

<body id="foto">	
	
<div id="c2">
	<button onclick="generate();">
		Generate Screenshot »
	</button>
</div>
	
<a-scene embedded arjs="trackingMethod: best; sourceType:webcam; detectionMode:mono_and_matrix; matrixCodeType: 3x3;" > <!-- crea la scena-->

<a-assets>
	<img id="1" src="img/CARLO_BO.jpg" alt="carlobo">
	<img id="2" src="img/ERSU.jpg" alt="ersu">
	<img id="3" src="img/MERCATALE.jpg" alt="mercatale">
	<img id="4" src="img/ORTOBOTANICO.jpg" alt="orto">
	<img id="5" src="img/PIAZZA.jpg" alt="piazza">
	<img id="6" src="img/SANTA_LUCIA.jpg" alt="lucia">
	<img id="7" src="img/TORRICINI.jpg" alt="torricini">
	<img id="8" src="img/TURKISH_KEBAB.jpg" alt="kebab">
	<img id="9" src="img/VIA_MAZZINI.jpg" alt="mazzini">
	<img id="10" src="img/Accademia.jpg" alt="accademia"> 
</a-assets>

<a-marker preset="hiro">
	<a-image src="#1" rotation="-90 0 0" width="852" scale="0.005 0.005" height="1066" position="-1.5 0 -1.5"></a-image>
</a-marker>

<!-- a-marker type="pattern" url="marker/ersu.patt">
	<a-image src="#2" rotation="-90 0 0" width="1456" height="1820" scale="0.005 0.005" position="-2 0 -1.5"></a-image> 
</a-marker>

<a-marker type="pattern" url="marker/mercatale.patt">
	<a-image src="#3" rotation="-90 0 0" width="956" scale="0.005 0.005" height="1194" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/orto.patt">
	<a-image src="#4" rotation="-90 0 0" width="951" scale="0.005 0.005" height="1188" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/piazza.patt">
	<a-image src="#5" rotation="-90 0 0" width="1383" scale="0.005 0.005" height="1727" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/santalucia.patt">
	<a-image src="#6" rotation="-90 0 0" width="1359" scale="0.005 0.005" height="1700" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/torricini.patt">
	<a-image src="#7" rotation="-90 0 0" width="1128" scale="0.005 0.005" height="1409" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/kebab.patt">
	<a-image src="#8" rotation="-90 0 0" width="1107" scale="0.005 0.005" height="1384" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/mazzini.patt">
	<a-image src="#9" rotation="-90 0 0" width="1332" scale="0.005 0.005" height="1665" position="-1.5 0 -1.5"></a-image> 
</a-marker>
	
<a-marker type="pattern" url="marker/dog.patt">
	<a-image src="#10" rotation="-90 0 0" width="835" scale="0.005 0.005" height="975" position="-1.5 0 -1.5"></a-image> 
</a-marker-->

<a-entity camera></a-entity>

</a-scene>
	
<div id="container">
	
	<p class="info"> 
		Istruzioni: <br><br> -Condividere l'utilizzo della videocamera con la pagina internet <br><br> -Rimanere dentro gli appositi segni sul terreno <br><br> -Posizionare correttamente la videocamera per una corretta visualizzazione dell'immagine nell'ambiente <br>(si consiglia un'inquadratura orizzontale)<br><br> Buon divertimento.
	</p>

<button onClick="avviso()">HO CAPITO!</button> 
	
</div>

	
<script type="text/javascript">
	function avviso() {
    var x = document.getElementById("container");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
}

	
// CODICE PER SCREENSHOT
	
(function(exports) {
    function urlsToAbsolute(nodeList) {
        if (!nodeList.length) {
            return [];
        }
        var attrName = 'href';
        if (nodeList[0].__proto__ === HTMLImageElement.prototype || nodeList[0].__proto__ === HTMLScriptElement.prototype) {
            attrName = 'src';
        }
        nodeList = [].map.call(nodeList, function(el, i) {
            var attr = el.getAttribute(attrName);
            if (!attr) {
                return;
            }
            var absURL = /^(https?|data):/i.test(attr);
            if (absURL) {
                return el;
            } else {
                return el;
            }
        });
        return nodeList;
    }

    function screenshotPage() {
        var wrapper = document.getElementsByTagName('a-scene'); // getElementById('foto');  --> è il file originale
        html2canvas(wrapper, {
            onrendered: function(canvas) {
                canvas.toBlob(function(blob) {
                    saveAs(blob, 'myScreenshot.png');
                });
            }
        });
    }

    function addOnPageLoad_() {
        window.addEventListener('DOMContentLoaded', function(e) {
            var scrollX = document.documentElement.dataset.scrollX || 0;
            var scrollY = document.documentElement.dataset.scrollY || 0;
            window.scrollTo(scrollX, scrollY);
        });
    }

    function generate() {
        screenshotPage();
    }
    exports.screenshotPage = screenshotPage;
    exports.generate = generate;
})(window);
	
	</script>
</body>
</html>